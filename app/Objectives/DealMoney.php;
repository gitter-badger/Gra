<?php

namespace HempEmpire\Objectives;
use Event;
use HempEmpire\Events\Deal;

class DealMoney extends Objective {
	protected $state;
	protected $count;

	public function __construct($money) {
		$this->count = $money;
		$this->state = 0;
	}

	public function render() {
		return $this->renderProgress(trans('objective.dealMoney'), $this->state, $this->count);
	}

	public function check() {
		return $this->state >= $this->count;
	}

	public function init() {
		Event::listen(Deal::class , [$this, 'onDeal']);
	}

	public function onDeal(Deal $event) {
		$this->state += $event->money;
		$this->change();
	}
}